// /**
//  * @param { import("knex").Knex } knex
//  * @returns { Promise<void> }
//  */

// exports.up = function(knex) {
//     return knex.schema.withSchema('public')
//         .createTable('university', (table) => {
//             table.string('name').primary()
//             table.string('location').notNullable()
//             table.enum('continent', ['Asia', 'Africa', 'North America', 'South America', 'Europe', 'Oceania', 'Middle East']).defaultTo(null)
//             table.float('gpa_10_percentile').defaultTo(null)
//             table.float('gpa_90_percentile').defaultTo(null)
//             table.string('image_filename')
//             table.text('flavor_text')
//             table.dateTime('created').defaultTo(knex.fn.now())
//             table.dateTime('updated')
//         })
//         .createTable('user', (table) => {
//             table.string('email').primary().notNullable()
//             table.string('name').notNullable()
//             table.varchar('password', 255).notNullable()
//             table.string('flavor_text').notNullable().defaultTo("Life-long learner")
//             // backend user info
//             table.boolean('is_admin').notNullable().defaultTo(false)
//             // default unset user info
//             table.string('image_filename')
//             table.boolean('is_alumni').defaultTo(false)
//             table.integer('year_on_exchange').defaultTo(null)
//             table.integer('exchange_duration').defaultTo(null)
//             table.dateTime('created').defaultTo(knex.fn.now())
//             table.dateTime('updated')
//         })
//         .createTable('tag', (table) => {
//             table.string('name').primary()
//         })
//         .createTable('review', (table) => {
//             table.increments('id').primary()
//             table.string('user_email').index().references('email').inTable('user')
//             table.string('university_name').index().references('name').inTable('university')
//             table.text('review_text').notNullable()
//             table.dateTime('created').defaultTo(knex.fn.now())
//             table.dateTime('updated')
//             table.float('rating').notNullable()
//         })
//         .createTable('uni_tag', (table) => {
//             table.string('university_name').index().references('name').inTable('university')
//             table.string('tag_name').index().references('name').inTable('tag')
//             table.primary(['university_name', 'tag_name'])
//         })
//         .createTable('uni_exchange', (table) => {
//             table.string('university_name').index().references('name').inTable('university')
//             table.string('duration').notNullable()
//             table.primary(['university_name', 'duration'])
//         })
//         .createTable('uni_user', (table) => {
//             table.string('university_name').index().references('name').inTable('university')
//             table.string('user_email').index().references('email').inTable('user')
//             table.boolean('is_home').notNullable().defaultTo(true) // true - home, false - exchange
//             table.primary(['university_name', 'user_email'])
//         })
//         .createTable('uni_forum_thread', (table) => {
//             table.increments('id').primary()
//             table.string('university_name').index().references('name').inTable('university')
//             table.string('user_email').index().references('email').inTable('user')
//             table.text('forum_title').notNullable()
//             table.text('forum_text').notNullable()
//             table.text('forum_text_raw').notNullable()
//             table.dateTime('created').defaultTo(knex.fn.now())
//             table.dateTime('updated')
//         })
//         .createTable('uni_forum_comment', (table) => {
//             table.increments('id').primary()
//             table.string('user_email').index().references('email').inTable('user')
//             table.integer('thread_id').index().references('id').inTable('uni_forum_thread').notNullable()
//             table.integer('parent_id').index().references('id').inTable('uni_forum_comment')
//             // SELECT COUNT(*) FROM comment_likes WHERE comment_id = id
//             table.integer('num_likes').defaultTo(0)
//             table.integer('num_dislikes').defaultTo(0)
//             table.text('comment_text').notNullable()
//             table.text('comment_text_raw').notNullable()
//             table.dateTime('created').defaultTo(knex.fn.now())
//             table.dateTime('updated')
//         })
//         .createTable('university_image', (table) => {
//             table.string('university_name').index().references('name').inTable('university')
//             table.string('image_filename')
//             table.primary(['university_name', 'image_filename'])
//         })
//         .createTable('comment_likes', (table) => {
//             table.string('user_email').index().references('email').inTable('user')
//             table.integer('comment_id').index().references('id').inTable('uni_forum_comment')
//             table.timestamp('created_at').defaultTo(knex.fn.now())
//             table.primary(['user_email', 'comment_id'])
//         })
//         .createTable('comment_dislikes', (table) => {
//             table.string('user_email').index().references('email').inTable('user')
//             table.integer('comment_id').index().references('id').inTable('uni_forum_comment')
//             table.timestamp('created_at').defaultTo(knex.fn.now())
//             table.primary(['user_email', 'comment_id'])
//         })
        
// }

// /**
//  * @param { import("knex").Knex } knex
//  * @returns { Promise<void> }
//  */
// exports.down = function(knex) {
//     return knex.schema
//         .dropTableIfExists('university')
//         .dropTableIfExists('user')
//         .dropTableIfExists('tag')
//         .dropTableIfExists('review')
//         .dropTableIfExists('uni_tag')
//         .dropTableIfExists('uni_exchange')
//         .dropTableIfExists('uni_user')
//         .dropTableIfExists('uni_forum_thread')
//         .dropTableIfExists('uni_forum_comment')
//         .dropTableIfExists('university_image')
//         .dropTableIfExists('comment_likes')
//         .dropTableIfExists('comment_dislikes')
// }
